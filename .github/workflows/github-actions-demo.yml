name: run main.py - upload video
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ðŸŽ¶ Creating and Uploading video."
      

      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner

      - name: install imagemagick
        run: sudo apt install imagemagick

      - name: change IM rights 1
        run:   cat /etc/ImageMagick-6/policy.xml | sed 's/none/read,write/g' | sudo tee /etc/ImageMagick-6/policy.xml

      - name: change ImageMagick rights
        run: sudo echo '<policymap>  <!-- <policy domain="resource" name="temporary-path" value="/tmp"/> -->  <!-- <policy domain="resource" name="memory" value="2GiB"/> -->  <!-- <policy domain="resource" name="map" value="4GiB"/> -->  <!-- <policy domain="resource" name="area" value="1GB"/> -->  <!-- <policy domain="resource" name="disk" value="16EB"/> -->  <!-- <policy domain="resource" name="file" value="768"/> -->  <!-- <policy domain="resource" name="thread" value="4"/> -->  <!-- <policy domain="resource" name="throttle" value="0"/> -->  <!-- <policy domain="resource" name="time" value="3600"/> -->  <!-- <policy domain="system" name="precision" value="6"/> -->  <policy domain="cache" name="shared-secret" value="passphrase"/>  <policy domain="coder" rights="none" pattern="EPHEMERAL" />  <policy domain="coder" rights="none" pattern="URL" />  <policy domain="coder" rights="none" pattern="HTTPS" />  <policy domain="coder" rights="none" pattern="MVG" />  <policy domain="coder" rights="none" pattern="MSL" />  <policy domain="coder" rights="none" pattern="TEXT" /><policy domain="coder" rights="none" pattern="SHOW" />  <policy domain="coder" rights="none" pattern="WIN" />  <policy domain="coder" rights="none" pattern="PLT" />  <!-- <policy domain="path" rights="none" pattern="@*" /> --></policymap>' > /etc/ImageMagick-6/policy.xml


      - name: setup python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9' # install the python version needed
          
      - name: install python packages
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          
      - name: execute py script # run main.py
        run: python main.py